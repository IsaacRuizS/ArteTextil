<div class="roles-wrapper">

    <div class="d-flex justify-content-between mb-4">
        <h2 class="fw-bold">Gestión de Roles</h2>
        <!-- Future: Add 'Create Role' button here -->
    </div>

    <!-- FILTRO -->
    <div class="filter-box flex-grow-1 me-3 mb-4">
        <label class="form-label fw-semibold">Buscar Rol</label>
        <div class="input-group">
            <span class="input-group-text"><i class="mdi mdi-magnify"></i></span>
            <input type="text" class="form-control" [(ngModel)]="searchTerm" placeholder="Nombre del rol...">
        </div>
    </div>

    <!-- LISTADO -->
    <div class="table-responsive card shadow-sm p-3">
        <table class="table table-hover align-middle mb-0">
            <thead class="table-light">
                <tr>
                    <th>ID</th>
                    <th>Rol</th>
                    <th>Descripción</th>
                    <th>Estado</th>
                    <th class="text-end">Acciones</th>
                </tr>
            </thead>
            <tbody>
                @for (role of filteredRoles; track role.roleId) {
                <tr>
                    <td>{{ role.roleId }}</td>

                    <td class="fw-semibold">{{ role.name }}</td>

                    <td class="text-muted">{{ role.description }}</td>

                    <td>
                        <span class="badge" [class.bg-success]="role.isActive" [class.bg-secondary]="!role.isActive">
                            {{ role.isActive ? 'Activo' : 'Inactivo' }}
                        </span>
                    </td>

                    <td class="text-end">
                        @if (role.isActive) {
                        <button class="btn btn-outline-danger btn-sm" (click)="onDeactivate(role)"
                            title="Desactivar Rol">
                            <i class="mdi mdi-delete-off"></i> Desactivar
                        </button>
                        } @else {
                        <button class="btn btn-outline-secondary btn-sm" disabled>
                            <i class="mdi mdi-lock"></i> Desactivado
                        </button>
                        }
                    </td>
                </tr>
                }
                @if (filteredRoles.length === 0) {
                <tr>
                    <td colspan="5" class="text-center py-4 text-muted">
                        No se encontraron roles que coincidan con la búsqueda.
                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>

</div>